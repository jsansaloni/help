Consultar el estado del cluster: 
curl -XGET http://c04a:8902/_cluster/health?pretty -s   
curl -XGET --user elastic:X4Elastyc http://c04a:8902/_cluster/state?pretty -s 

CHECK SETTINGS (entre ellas si el reallocation está ON/OFF):
curl -XGET --user elastic:X4Elastyc http://c04a:8902/_cluster/settings?pretty


Consultar el estado de todos los nodos de un cluster:
curl  -XGET "http://c04a:8902/_nodes/_all/info?pretty" -s

Consultar el estado de un nodo en concreto:
curl -XGET 'http://c04a:8902/_nodes/c04a/stats?pretty' -s

Consultar Info y estadísticas del cluster (docs., tamaño, etc)
curl -XGET "http://c04a:8902/_stats?pretty" -s

Estdo indices
curl -XGET --user elastic:X4Elastyc -H 'Content-Type: application/json' 'http://ela01a:8932/_cat/indices?pretty&pretty' -s  | grep -v "green"


Estado de las colas
curl -XGET --user elastic:X4Elastyc -H 'Content-Type: application/json' 'http://ela01a:8902/_cat/thread_pool/?v&h=node_name,host,name,port,queue,queue_size,rejected,active,size,min,max,keep_alive'


Colas ESM
curl -kXGET --user elastic:X4Elastyc -H 'Content-Type: application/json' 'https://elasticesm.edicom.es:443/_cat/thread_pool/?v' -s

# KUBECONFIG
file=admin.conf.old; echo "$(cat $file| grep -i certificate | grep client |awk  '{print $2}')" | base64 -d > /tmp/tmpfile; openssl x509 -in /tmp/tmpfile -text -noout
kubeadm alpha kubeconfig user --client-name kubernetes-admin --org system:masters > admin.conf
file=admin.conf ; echo "$(cat $file| grep -i certificate | grep client |awk  '{print $2}')" | base64 -d > /tmp/tmpfile; openssl x509 -in /tmp/tmpfile -text -noout


DARLE TRAYA
curl -skXPUT --user elastic:X4Elastyc -H 'Content-Type: application/json'  https://elasticesm.edicom.es:443/_cluster/settings?pretty -d ' {"persistent" : { "cluster" : {"routing" : {"allocation" : {"node_concurrent_recoveries" : "10", "cluster_concurrent_rebalance" : "10", "node_initial_primaries_recoveries" : "10"  } } } } }'

Quitarle el tag de hotwarm
curl -XPUT -H 'Content-Type: application/json' -u elastic:X4Elastyc "http://${ip_cluster}/${indice}/_settings" -d '{  "settings": { "index.routing.allocation.require.box_type" : null } }'


Crear snapshot
curl --user "elastic:X4Elastyc" -sSkLXGET 'ela01c:8922/_snapshot/backup_elapool1/_all?pretty' | grep -E "\"state\"|\"snapshot\" : \"elapool1"
